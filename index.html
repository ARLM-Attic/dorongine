<!doctype html>
<html>

	<head>
		<title>Synned</title>
		<link href="css/bootstrap.css" rel="stylesheet" type="text/css"></link>
		<link href="css/bootstrap-theme.css" rel="stylesheet" type="text/css"></link>
		<link href="app/css/synned.css" rel="stylesheet" type="text/css"></link>
	</head>
	<body>

		<div id="container">

		</div>

		<script id='template' type='text/ractive'>
			
			<div id="raw-resources">
				{{# game.byComponent('collected') }}
				<div class="raw-res">
					<button data-type="{{name}}" on-tap="collectItem" title="{{name}}"><img src="{{icon}}" title="{{name}}" class="raw-icon" /></button>
					<div class="resource-count">{{this.formattedAmount()}}</div>
					<div class="resource-max">{{maximum}}</div>
					<div class="resource-mods"></div>
				</div>
				{{/ game}}
			</div>
		
			<div id="population" class="holder">
			<table>
			<thead>
				<tr>
				<th><img src="{{game.items.People.icon}}" title="People" class="item-icon" /></th>
				<th>{{game.items.People.amount}} / {{game.items.People.maximum}}</th>
				<th></th>
				
				<th>Required</th>
				<th>Cost</th>
				<th>Consumes</th>
				<th>Provides</th>
				<th>Improves</th>
				
				</tr>
			</thead>
			<tbody>
				{{# game.byComponent('employable') }}
					{{#this.meetsRequirements()}}
					<tr>
					<td><img title="{{name}}" src="{{icon}}" class="item-icon" /></td>
					<td>{{amount}} / {{maximum}}</td>
					<td>{{#this.canBuy(1)}}<button on-tap="buyItem">Hire</button>{{/this}}</td>

					<td>
					{{#components.requires.topics :topic}}
						<span class="requirement"><img title="{{topic}}" src="{{iconfor(topic)}}" class="required-icon" /> {{this}}</span>
					{{/components}}
					</td>

					
						<td>
					{{#components.created.cost :resource}}
					<span class="requirement"><img title="{{resource}}" src="{{iconfor(resource)}}" class="required-icon" /> {{this}}</span>
					{{/components}}
					</td>
					
					<td>
					{{#components.consumer.consumes :resource}}
					<span class="requirement"><img title="{{resource}}" src="{{iconfor(resource)}}" class="required-icon" /> {{this}}</span>
					{{/components}}
					</td>
					
					
					<td>
					{{#components.worker.provides :resource}}
					<span class="requirement"><img title="{{resource}}" src="{{iconfor(resource)}}" class="required-icon" /> {{this}}</span>
					{{/components}}
					</td>
					
					<td>
					{{#components.improves :resource}}
					<span class="requirement"><img title="{{resource}}" src="{{iconfor(resource)}}" class="required-icon" /> {{this}}</span>
					{{/components}}
					</td>
					
					</tr>
					
					{{/meetsRequirements}}

				{{/game}}
				<tr>
				<td><img src="{{game.items.Sick.icon}}" title="Sick People" class="item-icon" /></td>
				<td>{{game.items.Sick.amount}}</td>
				
				<td><img src="{{game.items.Dead.icon}}" title="Dead People" class="item-icon" /></td>
				<td>{{game.items.Dead.amount}}</td>
				
				<td></td>
				
				<td></td>
				<td></td>
				<td></td>
				
				</tr>
			</tbody>
			</table>
			</div>
			
			<div id="knowledge" class="holder">
				<table>
				{{# game.topics :name}}
				<tr>
				<td><img src="{{icon}}" title="{{name}}" class="item-icon" /></td>
				<td>Level {{level}}</td>
				<td><progress max="{{target}}" value="{{knowledge}}"></progress></td>
				<td class="knowledge-input">
					<select value="{{percentage}}">
						<option value="0">0</option>
						<option value="10">10</option>
						<option value="20">20</option>
						<option value="30">30</option>
						<option value="40">40</option>
						<option value="50">50</option>
						<option value="60">60</option>
						<option value="70">70</option>
						<option value="80">80</option>
						<option value="90">90</option>
						<option value="100">100</option>
					</select>
				</td>
				</tr>
				{{/ game.topics}}
				</table>
			</div>

			<div id="resources" class="holder">
				
				
				<div id="mined-resources">
				<table>
					<tr>
					<td></td><td><button on-tap="mine">Mining at {{game.globalRates.mined}}% efficiency</button></td>
					</tr>
					{{# game.byComponent('mined') }}
					<tr>
					<td width="60%">
					<img title="{{name}}" class="item-icon" src="{{icon}}" /> {{rates.mined}}% efficiency
					</td>
					<td>
					<span class="resource-count">{{amount}} / {{maximum}}</span>
					</td>
					
					<td>
					{{#this.canBuy(1)}}
					<button title="{{name}}" on-tap="buyItem">
					{{components.created.cost.Cash}}
					</button>
					{{/this}}
					</td>
					
					</tr>
					{{/ game}}
				</table>
				</div>
			</div>

			<div id="creatable"  class="holder">
				
				<table>
					<tr>
					<th>Item</th>
					<th>Amount</th>
					<th>Requires</th>
					<th>Cost</th>
					<th>Consumes</th>
					<th>Provides</th>
					<th>Improves</th>
					</tr>
					
					{{# game.byComponent('goods') }}
					{{#this.meetsRequirements()}}
					
						<tr>
						<td class="build-col">
							{{#this.canBuy(1)}}
							<button title="{{name}}" on-tap="buyItem"><img title="{{name}}" src="{{icon}}" class="item-icon" /></button>
							{{/this}}
							{{^this.canBuy(1)}}
							<img title="{{name}}" src="{{icon}}" class="item-icon" />
							{{/this}}
						</td>
						<td>
						<span class="item-amount">{{amount}} / {{maximum}}</span>
						</td>

						
							<td>
							{{#components.requires.topics :topic}}
								<span class="requirement"><img title="{{topic}}" src="{{iconfor(topic)}}" class="required-icon" /> {{this}}</span>
							{{/components}}
							</td>


								<td>
							{{#components.created.cost :resource}}
							<span class="requirement"><img title="{{resource}}" src="{{iconfor(resource)}}" class="required-icon" /> {{this}}</span>
							{{/components}}
							</td>

							<td>
							{{#components.consumer.consumes :resource}}
							<span class="requirement"><img title="{{resource}}" src="{{iconfor(resource)}}" class="required-icon" /> {{this}}</span>
							{{/components}}
							</td>


							<td>
							{{#components.worker.provides :resource}}
							<span class="requirement"><img title="{{resource}}" src="{{iconfor(resource)}}" class="required-icon" /> {{this}}</span>
							{{/components}}
							</td>

							<td>
							{{#components.improves :resource}}
							<span class="requirement"><img title="{{resource}}" src="{{iconfor(resource)}}" class="required-icon" /> {{this}}</span>
							{{/components}}
							</td>
					
						</tr>
					{{/meetsRequirements}}
					{{/game}}
				</table>
				
				<h2>Buildings</h2>
				<table>
					<tr>
					<th>Item</th>
					<th>Amount</th>
					<th>Requires</th>
					<th>Cost</th>
					<th>Consumes</th>
					<th>Provides</th>
					<th>Improves</th>
					</tr>
					
					{{# game.byComponent('building') }}
					{{#this.meetsRequirements()}}
						<tr>
						<td class="build-col">
							{{#this.canBuy(1)}}
							<button title="{{name}}" on-tap="buyItem"><img title="{{name}}" src="{{icon}}" class="item-icon" /></button>
							{{/this}}
							{{^this.canBuy(1)}}
							<img title="{{name}}" src="{{icon}}" class="item-icon" />
							{{/this}}
						</td>
						<td>
						<span class="item-amount">{{amount}} / {{maximum}}</span>
						</td>
						
							<td>
							{{#components.requires.topics :topic}}
								<span class="requirement"><img title="{{topic}}" src="{{iconfor(topic)}}" class="required-icon" /> {{this}}</span>
							{{/components}}
							</td>


								<td>
							{{#components.created.cost :resource}}
							<span class="requirement"><img title="{{resource}}" src="{{iconfor(resource)}}" class="required-icon" /> {{this}}</span>
							{{/components}}
							</td>

							<td>
							{{#components.consumer.consumes :resource}}
							<span class="requirement"><img title="{{resource}}" src="{{iconfor(resource)}}" class="required-icon" /> {{this}}</span>
							{{/components}}
							</td>


							<td>
							{{#components.worker.provides :resource}}
							<span class="requirement"><img title="{{resource}}" src="{{iconfor(resource)}}" class="required-icon" /> {{this}}</span>
							{{/components}}
							</td>

							<td>
							{{#components.improves :resource}}
							<span class="requirement"><img title="{{resource}}" src="{{iconfor(resource)}}" class="required-icon" /> {{this}}</span>
							{{/components}}
							</td>
					
						</tr>
						{{/meetsRequirements}}
					{{/game}}
				</table>
			</div>
			
			
			<div id="footer">
				
				<div id="build-queue" class="queue-container">
					{{#game.buildQueue}}
					<div class="buildQueueItem">
						<img title="{{item.name}}" src="{{item.icon}}" class="item-icon" /> 
						<div class="buildProgress">
						<progress max="{{totalSteps}}" value="{{currentStep}}"></progress>
						</div>
					</div>
					{{/game.buildQueue}}
					<div class="emptyfor spacing">&nbsp;</div>
				</div>
				
				<div id="messages" class="queue-container">
					{{#game.messages}}
					<div class="message {{class}}">
					<span class="msg-time">{{time.toLocaleTimeString()}}</span> {{message}}
					</div>
					{{/game.messages}}
				</div>
				
			</div>
		</script>

		<script type="text/javascript" src="js/jquery-2.0.0.min.js"></script>
		<script type="text/javascript" src="js/ractive.js"></script>
		<script type="text/javascript" src="js/ractive-events-tap.js"></script>
		<script type="text/javascript" src="app/js/game.js"></script>
		<script type="text/javascript" src="app/js/agents.js"></script>
		<script type="text/javascript" src="app/js/types.js"></script>
		<script type="text/javascript" src="app/js/commands.js"></script>
		<script type="text/javascript" src="app/js/synned.js"></script>
	</body>
</html>